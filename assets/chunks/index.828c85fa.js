import{e as V,a as l,y as z,z as R,b as h,i as E,l as I,o as y,c as x,w as b,u as g,g as M,d as c,t as v,p as B,B as D,T as N,C as k,q as A,s as H}from"../app.507bf513.js";const W={mounted(e,s){e.addEventListener("click",function(n){let a=n.clientX-e.offsetLeft,o=n.clientY-e.offsetTop,t=document.createElement("span");t.style.position="absolute",t.style.background=s.value||"rgba(150, 91, 91, .8)",t.style.opacity="1",t.style.borderRadius="50%",e.append(t);let r=0,i=0,u=1,m=Math.sqrt(e.offsetWidth*e.offsetWidth+e.offsetHeight*e.offsetHeight)*2,p=setInterval(()=>{r+=5,i+=5,u-=.01,r<m?(t.style.width=r+"px",t.style.height=i+"px",t.style.opacity=u+"",t.style.left=a-t.offsetWidth/2+"px",t.style.top=o-t.offsetHeight/2+"px"):(clearInterval(p),p=null,t.remove())},10)})}};const _=V({name:"AButton",props:{type:{type:String,default:()=>""},size:{type:String,default:()=>"default"},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},directives:{waterRipple:W},setup(e,{slots:s}){const n=t=>{switch(t){case"primary":return"button-primary";case"success":return"button-success";case"danger":return"button-danger";case"warning":return"button-warning";case"info":return"button-info";default:return"button-default"}},a=t=>{switch(t){case"small":return"size-small";case"default":return"size-default";case"large":return"size-large";default:return"size-default"}},o=()=>l("div",{class:"icon-slot-content"},[e.loading?l("div",{class:"iconfont icon-loading is-loading"},null):s.icon&&l("div",{class:"a-icon"},[s.icon()])]);return()=>l("div",{class:"a-button-content"},[z(l("button",{disabled:e.disabled,class:`${(e.disabled||e.loading)&&"a-button-disabled"} a-button ${n(e.type)} ${a(e.size)}`},[o(),h(" "),s.default?s.default():""]),[[R("waterRipple"),`${e.type===""?"rgba(29, 29, 29, 0.365)":"#ffffff42"}`]])])}}),j=e=>(e.install=s=>{const n=e.name;console.log(n),s.component(n,e)},e),C=j(_);const q={class:"a-message-title"},F={class:"title"},L={class:"a-message-content"},G={class:"a-message-footer"},P=V({name:"message-box",props:{title:{type:String,default:"Message"},content:{type:String,default:"Message content"},showMessageBox:{type:Boolean,default:!1},showCancelBtn:{type:Boolean,default:!1},confirmBtnText:{type:String,default:"确认"},cancelBtnText:{type:String,default:"取消"},mantleClose:{type:Boolean,default:!1},field:{type:String,default:"confirm",validator:e=>S.includes(e)}},setup(e,{expose:s}){const n=e,a=E({visible:!1,promptValue:"",btnType:"confirm"}),{visible:o}=I(a),t=d=>{a.visible=d,a.visible?p():$()},r=()=>{a.btnType="confirm",t(!1)},i=()=>{a.btnType="cancel",t(!1)},u=()=>{n.mantleClose&&i()},m=({fied:d})=>{switch(d){case(!d||"confirm"):return k("span",null,n.content);case"prompt":return k("input",{value:a.promptValue,onInput:f=>a.promptValue=f.target.value,class:"messageInput"})}},p=()=>{document.body.style.borderRight="5px solid transparent",document.body.style.overflow="hidden"},$=()=>{document.body.style.borderRight="none",document.body.style.overflow="auto"};return s({setVisible:t,state:a}),(d,f)=>(y(),x(N,{name:"modal"},{default:b(()=>[g(o)?(y(),M("div",{key:0,class:"a-message-box",onClick:u},[c("div",{class:"a-message-box-wrapper",onClick:f[0]||(f[0]=D(()=>{},["stop"]))},[c("div",q,[c("div",F,v(e.title),1),c("span",{class:"iconfont icon-close2",onClick:i})]),c("div",L,[l(m,{fied:n.field},null,8,["fied"])]),c("div",G,[l(g(C),{type:"primary",onClick:r},{default:b(()=>[h(v(e.confirmBtnText),1)]),_:1}),e.showCancelBtn?(y(),x(g(C),{key:0,onClick:i},{default:b(()=>[h(v(e.cancelBtnText),1)]),_:1})):B("",!0)])])])):B("",!0)]),_:1}))}}),S=["confirm","prompt"];let w=[];const T=e=>{const s=A(P,e);return new Promise((n,a)=>{w.length>0||X(s,{resolve:n,reject:a})})};S.forEach(e=>{T[e]=s=>(s.field=e,T(s))});const X=(e,{resolve:s,reject:n})=>{const a=document.createDocumentFragment(),o=e.mount(a);document.body.appendChild(a),o.setVisible(!0),w.push(o),H(o.state,t=>{if(!t.visible){switch(t.btnType){case"cancel":n(!1);break;case"confirm":s(t.promptValue);break}setTimeout(()=>{e.unmount(o)},100),w=[]}})};export{T as m};
