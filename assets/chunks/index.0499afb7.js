import{d as V,a as l,v as z,x as R,e as m,h as E,l as I,o as b,j as x,w as g,u as v,c as M,f as c,y as _,t as h,p as B,T as D,z as k,q as N,s as j}from"../app.b212b21a.js";const A={mounted(e,a){e.addEventListener("click",function(n){let s=n.clientX-e.offsetLeft,o=n.clientY-e.offsetTop,t=document.createElement("span");t.style.position="absolute",t.style.background=a.value||"rgba(150, 91, 91, .8)",t.style.opacity="1",t.style.borderRadius="50%",e.append(t);let r=0,i=0,u=1,y=Math.sqrt(e.offsetWidth*e.offsetWidth+e.offsetHeight*e.offsetHeight)*2,p=setInterval(()=>{r+=5,i+=5,u-=.01,r<y?(t.style.width=r+"px",t.style.height=i+"px",t.style.opacity=u+"",t.style.left=s-t.offsetWidth/2+"px",t.style.top=o-t.offsetHeight/2+"px"):(clearInterval(p),p=null,t.remove())},10)})}};const H=V({name:"AButton",props:{type:{type:String,default:()=>""},size:{type:String,default:()=>"default"},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},directives:{waterRipple:A},setup(e,{slots:a}){const n=t=>{switch(t){case"primary":return"button-primary";case"success":return"button-success";case"danger":return"button-danger";case"warning":return"button-warning";case"info":return"button-info";default:return"button-default"}},s=t=>{switch(t){case"small":return"size-small";case"default":return"size-default";case"large":return"size-large";default:return"size-default"}},o=()=>l("div",{class:"icon-slot-content"},[e.loading?l("div",{class:"iconfont icon-loading is-loading"},null):a.icon&&l("div",{class:"icon"},[m("slots.icon()")])]);return()=>l("div",{class:"a-button-content"},[z(l("button",{disabled:e.disabled,class:`${(e.disabled||e.loading)&&"a-button-disabled"} a-button ${n(e.type)} ${s(e.size)}`},[o(),m(" "),a.default?a.default():""]),[[R("waterRipple"),`${e.type===""?"rgba(29, 29, 29, 0.365)":"#ffffff42"}`]])])}}),W=e=>(e.install=a=>{const n=e.name;console.log(n),a.component(n,e)},e),C=W(H);const q={class:"a-message-title"},F={class:"title"},L={class:"a-message-content"},G={class:"a-message-footer"},P=V({__name:"message-box",props:{title:{type:String,default:"Message"},content:{type:String,default:"Message content"},showMessageBox:{type:Boolean,default:!1},showCancelBtn:{type:Boolean,default:!1},confirmBtnText:{type:String,default:"确认"},cancelBtnText:{type:String,default:"取消"},mantleClose:{type:Boolean,default:!1},field:{type:String,default:"confirm",validator:e=>S.includes(e)}},setup(e,{expose:a}){const n=e,s=E({visible:!1,promptValue:"",btnType:"confirm"}),{visible:o}=I(s),t=d=>{s.visible=d,s.visible?p():$()},r=()=>{s.btnType="confirm",t(!1)},i=()=>{s.btnType="cancel",t(!1)},u=()=>{n.mantleClose&&i()},y=({fied:d})=>{switch(d){case(!d||"confirm"):return k("span",null,n.content);case"prompt":return k("input",{value:s.promptValue,onInput:f=>s.promptValue=f.target.value,class:"messageInput"})}},p=()=>{document.body.style.borderRight="5px solid transparent",document.body.style.overflow="hidden"},$=()=>{document.body.style.borderRight="none",document.body.style.overflow="auto"};return a({setVisible:t,state:s}),(d,f)=>(b(),x(D,{name:"modal"},{default:g(()=>[v(o)?(b(),M("div",{key:0,class:"a-message-box",onClick:u},[c("div",{class:"a-message-box-wrapper",onClick:f[0]||(f[0]=_(()=>{},["stop"]))},[c("div",q,[c("div",F,h(e.title),1),c("span",{class:"iconfont icon-close2",onClick:i})]),c("div",L,[l(y,{fied:n.field},null,8,["fied"])]),c("div",G,[l(v(C),{type:"primary",onClick:r},{default:g(()=>[m(h(e.confirmBtnText),1)]),_:1}),e.showCancelBtn?(b(),x(v(C),{key:0,onClick:i},{default:g(()=>[m(h(e.cancelBtnText),1)]),_:1})):B("",!0)])])])):B("",!0)]),_:1}))}}),S=["confirm","prompt"];let w=[];const T=e=>{const a=N(P,e);return new Promise((n,s)=>{w.length>0||X(a,{resolve:n,reject:s})})};S.forEach(e=>{T[e]=a=>(a.field=e,T(a))});const X=(e,{resolve:a,reject:n})=>{const s=document.createDocumentFragment(),o=e.mount(s);document.body.appendChild(s),o.setVisible(!0),w.push(o),j(o.state,t=>{if(!t.visible){switch(t.btnType){case"cancel":n(!1);break;case"confirm":a(t.promptValue);break}setTimeout(()=>{e.unmount(o)},100),w=[]}})};export{T as m};
