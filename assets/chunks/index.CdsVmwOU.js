import{d as C,b as x,r as R,G as S,q as p,z as V,A as k,u as d,s as B,x as E,B as c,D as N,E as z,K as A,I as D,M as H,w as f}from"./framework.CSaOOoxE.js";const I=(e,s)=>e.findIndex(t=>t===s),j=e=>{try{return!!e}catch{return!1}},u={SUCCESS:"success",WARNING:"warning",Message:"message",ERROR:"error"},O=C({__name:"message",props:{type:{type:String,defualt:u.Message,validator:e=>Object.values(u).includes(e)},message:{type:String,default:u.Message},duration:{type:Number}},setup(e,{expose:s}){let t=null;const a=e,n=x(!1),l=R({messageVisible:!1,top:0}),{messageVisible:m,top:M}=S(l),b=()=>{switch(a.type){case"error":return"icon-cuowu";case"success":return"icon-chenggong";case"warning":return"icon-tixingshixin";case"info":return"icon-xinxi-yuankuang";default:return"icon-xinxi-yuankuang"}},w=o=>(m.value=o,new Promise(r=>{t=setTimeout(()=>{r(""),clearTimeout(t),t=null},300)})),g=o=>{n.value=o,n.value};return s({isHover:n,setMessageVisible:w,setMessageTop:o=>(l.top=o,o),height:45,margin:10}),(o,r)=>(p(),V(D,{name:"a-message-fade"},{default:k(()=>[d(m)?(p(),B("div",{key:0,ref:"messageRef",style:E({top:d(M)+"px"}),class:"a-message"},[c("div",{class:"a-message-content",onMouseenter:r[0]||(r[0]=T=>g(!0)),onMouseleave:r[1]||(r[1]=T=>g(!1))},[c("span",{style:{"margin-right":"10px","font-size":"18px"},class:N(`iconfont ${b()} ${a.type}`)},null,2),c("div",null,z(a.message),1)],32)],4)):A("",!0)]),_:1}))}}),i=x([]),v=function(e){const s=H(O,e);_(s,e.duration)};Object.values(u).forEach(e=>{v[e]=s=>(s.type=e,v(s))});const _=(e,s)=>{const t=document.createDocumentFragment(),a=e.mount(t);i.value.push(a),document.body.appendChild(t),h(a),a.setMessageVisible(!0),f(()=>i.value,()=>{h(a)}),f(()=>a.isHover,n=>{!n&&y(e,a,s)},{deep:!0}),y(e,a,s)},y=(e,s,t)=>{s.timer=setTimeout(()=>{if(s.isHover){clearTimeout(s.timer),s.timer=null;return}s.setMessageVisible(!1).then(()=>{e.unmount(),i.value=i.value.filter(a=>a!==s),clearTimeout(s.timer),s.timer=null})},t||3e3)},h=e=>{const{setMessageTop:s,height:t,margin:a}=e,n=I(i.value,e);s(a*(n+1)+t*n)};export{v as a,j as y};
